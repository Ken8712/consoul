/* ライト感情システム用スタイル */

/* 基本フロートアニメーション */
@keyframes float {
  0%   { transform: translateY(-10px); }
  50%  { transform: translateY(10px); }
  100% { transform: translateY(-10px); }
}

@keyframes pulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.1); }
  100% { transform: scale(1); }
}

/* 物理ベース放物線アニメーション - 重力加速度を考慮 */
@keyframes projectile-physics {
  0% {
    transform: translate(0px, 0px) scale(1);
    opacity: 1;
  }
  10% {
    transform: translate(0px, -60px) scale(0.95);
    opacity: 0.95;
  }
  20% {
    transform: translate(0px, -100px) scale(0.85);
    opacity: 0.9;
  }
  30% {
    transform: translate(0px, -120px) scale(0.75);
    opacity: 0.85;
  }
  40% {
    transform: translate(0px, -125px) scale(0.65);
    opacity: 0.8;
  }
  50% {
    transform: translate(0px, -115px) scale(0.55);
    opacity: 0.75;
  }
  60% {
    transform: translate(0px, -95px) scale(0.45);
    opacity: 0.7;
  }
  70% {
    transform: translate(0px, -65px) scale(0.35);
    opacity: 0.65;
  }
  80% {
    transform: translate(0px, -30px) scale(0.25);
    opacity: 0.6;
  }
  90% {
    transform: translate(0px, -5px) scale(0.18);
    opacity: 0.55;
  }
  100% {
    transform: translate(0px, 0px) scale(0.15);
    opacity: 0.5;
  }
}

/* SVGコンテナの物理ベース投射アニメーション */
.light-container-projecting {
  animation: projectile-physics 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  position: fixed !important;
  z-index: 20;
}

/* 背景漂いアニメーション */
@keyframes background-float {
  0% {
    transform: translate(var(--start-x), var(--start-y)) translateY(-3px);
  }
  50% {
    transform: translate(var(--start-x), var(--start-y)) translateY(3px);
  }
  100% {
    transform: translate(var(--start-x), var(--start-y)) translateY(-3px);
  }
}

/* 同心円フェードイン */
@keyframes concentric-fade-in {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  100% {
    opacity: 0.6;
    transform: scale(1);
  }
}

/* 波紋効果 */
@keyframes ripple-effect {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.2);
  }
  100% {
    opacity: 0.6;
    transform: scale(1);
  }
}

/* メインライト */
#light {
  animation: float 0.8s ease-in-out infinite;
}

/* タッチ操作のためのスタイル */
[data-controller="light-svg"] {
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}

/* 背景に漂うlightのスタイル */
.floating-light {
  position: absolute;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  pointer-events: none;
  filter: blur(4px);
  opacity: 0.6;
  animation: background-float 6s ease-in-out infinite;
  z-index: 10;
}

/* 遠方表現のスタイル */
.floating-light.distant {
  width: 30px;
  height: 30px;
  filter: blur(6px) brightness(0.7);
  opacity: 0.3;
  animation: background-float 8s ease-in-out infinite;
}

/* 投射中のライト */
.floating-light.projecting {
  animation: projectile-flight 2s ease-out forwards;
  z-index: 15;
}

/* 蓄積ライト表示 */
.accumulated-light {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  filter: blur(3px);
  animation: concentric-fade-in 1s ease-out forwards;
  z-index: 12;
}

/* 初回ロード時の波紋効果 */
.ripple-light {
  animation: ripple-effect 2s ease-out forwards;
}

/* トースト通知のスタイル */
#toast.show {
  transform: translateX(0);
}

/* インタラクション無効化 */
.interaction-disabled {
  pointer-events: none;
  opacity: 0.7;
}